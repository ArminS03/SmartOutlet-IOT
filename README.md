# SmartOutlet IOT - Embedded Systems Project

پریز هوشمند، پروژه‌ی درس سیستم‌های نهفته‌ی تیم ما در پاییز ۱۴۰۲ بود.
هدف ما، ایجاد یک سیستمی بود که با استفاده از آن بتوانیم از راه دور و به آسانی دستگاه‌های برقی خود را مدیریت کنیم.

## مقدمه

در عصر حاضر، جایی که تکنولوژی و اینترنت اشیاء (IoT) نقش بسزایی در بهبود کیفیت زندگی ما دارند، هوشمندسازی منزل و محیط کار به یک نیاز اساسی تبدیل شده است. پروژه‌ی «پریز هوشمند» با هدف ارتقاء امکانات خانه هوشمند و افزایش کارایی و انعطاف‌پذیری در کنترل دستگاه‌های الکتریکی طراحی و پیاده‌سازی شده است. این پروژه با استفاده از ماژول کوییکتل و یک رله، امکان کنترل از راه دور دستگاه‌های الکتریکی را از طریق وب یا اپلیکیشن موبایل فراهم می‌کند.

در این پروژه، ما به ساخت یک پریز هوشمند پرداخته‌ایم که قادر است به واسطه‌ی فناوری GSM و اتصال به اینترنت، دستورات کاربر را از هر جای دنیا دریافت کرده و عملیاتی نظیر روشن یا خاموش کردن و یا برنامه‌ریزی زمانی برای فعالیت دستگاه‌های متصل شده را اجرا کند. این امر با استفاده از قابلیت Open CPU موجود در ماژول کوییکتل محقق شده که اجازه می‌دهد بدون نیاز به میکروکنترلر یا پردازنده کمکی، برنامه‌های کاربردی مختلفی را بر روی خود ماژول اجرا کنیم.

قابلیت Open CPU این امکان را به ما می‌دهد که با نوشتن کد مستقیماً بر روی ماژول، ویژگی‌های پیچیده‌تری نظیر برقراری ارتباط با سرورهای MQTT برای دریافت و ارسال پیام، ذخیره‌سازی داده‌ها در حافظه خود قطعه برای ذخیره کاربران، و کنترل دقیق‌تر رله‌ها و سایر قطعات الکترونیکی را بدون واسطه و با دقت بالا انجام دهیم.

## هدف

هدف از این پروژه، ایجاد یک پریز هوشمند قابل اعتماد و کاربردی است که کاربران بتوانند به صورت از راه دور و به آسانی دستگاه‌های برقی خود را مدیریت کنند. این شامل برنامه‌ریزی زمان‌های روشن و خاموش شدن پریز از طریق وب یا اپلیکیشن است.

## قطعات استفاده شده

- ماژول M65 نصب شده بر روی بورد
- مبدل USB به TTL
- رله و سایر قطعات الکتریکی برای مکانیزم سوئیچینگ

## توضیح فنی

این پروژه با استفاده از قابلیت GSM ماژول و ویژگی open CPU آن، برنامه‌ریزی شده است تا دستورات دریافتی از طریق پروتکل MQTT را پردازش کند و عملیاتی نظیر روشن یا خاموش کردن پریز را بر اساس برنامه‌های تعریف شده توسط کاربر اجرا کند..

## پیاده‌سازی

در ابتدا برای پیاده‌سازی هرکد مورد نیاز روی این بخش، نیاز داریم که کدهای مورد نیاز را کامپایل کنیم. این کار توسط MS-DOS تعبیه شده در SDK مربوطه انجام می‌شود که مسیر target آن کامپایلر مربوط به آن است. پس از اجرای برنامه مدنظر ما در main.c در پوشه custom، یک فایل با فرمت 
APPGS5MDM32A01.lod ساخته شده که با لود کردن آن در نرم‌افزار QFlash با استفاده از پورت‌های دیباگ، قطعه را پروگرام می‌کنیم.

برای دریافت log های مربوط به قطعه از نرم‌افزار QNavigator بهره گرفتیم که در برنامه اصلی با دستور APP_DEBUG می‌توان پیام‌های مدنظر را از طریق UART و از طریق پورت‌های RXD و LXD انتقال دهیم.

